## 1.5 프로토콜 계층과 서비스 모델
### 1.5.1 계층구조
* 네트워크 설계자는 프로토콜을 계층(layer)으로 조직한다.
* 각 프로토콜은 한 계층에 속하고 각 계층은 계층 내부에서 어떤 동작을 수행하거나, 직접 하위 계층의 서비스를 사용한다.
* 프로토콜 계층은 소프트웨어, 하드웨어 또는 둘의 통합으로 구현할 수 있다.
* 계층화는 시스템 구성요소에 대해 논의하기 위한 구조화된 방법을 제공하고, 모듈화는 시스템 구성요소의 갱신을 더 쉽게 해준다.
* 계층화의 결점은 한 계층의 기능이 하위 계층과 기능적으로 중복된다는 것, 어느 한 계층에서의 기능이 다른 계층에만 존재하는 정보를 필요로 할 수 있다는 것이다.
* 프로토콜 스택(protocol stack) : 다양한 계층의 모든 프로토콜
  * 인터넷 프로토콜 스택(5계층 구조) : physical / link / network / transport / application
  * OSI(Open System Interconnection) 모델 (7계층 구조) : physical / link / network / transport / session / presentation / application


* 애플리케이션 계층(application layer)

  * 네트워크 애플리케이션과 애플리케이션 계층 프로토콜이 있는 곳
  * HTTP(웹 문서 요청과 전송을 위해 제공) / SMTP(전자메일 전송을 제공) / FTP(두 종단 시스템 간의 파일 전송 제공) 등의 프로토콜 포함
  * 애플리케이션 계층 프로토콜 : 한 종단 시스템에 있는 애플리케이션이 다른 종단 시스템에 있는 애플리케이션과 **정보 패킷(Message)**을 교환하는데 사용
* 트랜스포트 계층(transport layer)

  * 클라이언트와 서버 간에 애플리케이션 계층 메시지를 전송하는 서비스 제공
  * TCP / UDP 프로토콜 포함

    * TCP : 애플리케이션에 연결지향형 서비스 제공, 애플리케이션 계층 메시지 전달 보장, 흐름제어(송신자/수신자의 속도 일치) 포함, 긴 메시지를 짧은 메시지로 나누고 혼잡 제어 기능 제공 (네트워크가 혼잡할 때 출발지의 전송 속도를 낮춤)
    * UDP: 비연결형 서비스 제공, 신뢰성 흐름제어, 혼잡제어를 제공하지 않음
  * 트랜스포트 계층 패킷을 **세그먼트(segment)**라고 한다.
* 네트워크 계층(network layer)
  * 한 호스트에서 다른 호스트로 **데이터그램(datagram)**을 라우팅
  * IP 데이터그램 필드를 정의하며 종단 시스템과 라우터가 이 필드에 어떻게 동작하는지를 정의하는 프로토콜(IP 프로토콜)을 갖고 있다.
  * 출발지와 목적지 사이에서 데이터그램이 이동하는 경로를 결정하는 라우팅 프로토콜을 포함한다.
* 링크 계층(link layer) 

  * 경로 상의 한 노드에서 다른 노드로 패킷이 이동하기 위해, 네트워크 계층은 링크 계층 서비스에 의존
  * 이더넷 / 와이파이 / 케이블 접속 네트워크의 DOCSIS 프로코콜
  * 링크 계층의 패킷을 **프레임(frame)**이라고 한다.
* 물리 계층(physical layer)

  * 프레임 내부의 각 비트를 한 노드에서 다음 노드로 이동하는 기능 제공
  * 
* 프레젠테이션 계층(presentation layer)

  * 통신하는 애플리케이션들이 교환되는 데이터의 의미를 해석하도록 하는 서비스 제공
  * 데이터 압축과 데이터 암호화 포함
* 세션 계층(session layer)

  * 동기화 제공(체크 포인트)
  * 연결이 손실되는 경우 연결 복구를 시도

### 1.5.2 캡슐화

* 각 계층에서 패킷은 헤더 필드(header field)와 페이로드 필드(payload field)라는 두 가지 형태의 필드를 갖는다.
* 페이로드는 일반적으로 그 계층 상위로부터의 패킷을 의미한다.