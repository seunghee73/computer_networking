## 1.4 패킷 교환 네트워크에서의 지연, 손실의 처리율
### 1.4.1 패킷 교환 네트워크에서의 지연 개요
* 처리 지연(processing delay)

  * 패킷 헤더를 조사하고 그 패킷을 어디로 보낼지를 결정하는 시간
  
  * 패킷의 비트 수준 오류를 조사하는데 필요한 시간

* 큐잉 지연(queuing delay)

  * 패킷이 큐에서 대기하는 시간
  
  * 앞서 도착한 패킷의 수에 의해 결정

* 전송 지연(transmission delay)

  * 패킷의 길이가 ***L***, 라우터 A에서 B까지 링크의 전송률은 ***R*** bps로 나타낼 때 전송 지연은 ***L/R***
  
  * 패킷의 모든 비트를 링크로 밀어내는 데(또는 전송하는 데) 필요한 시간

* 전파 지연(propagation delay)

  * 두 라우터 사이의 거리를 전파속도로 나눈 것
    $$
    d_{prop}=d/s
    $$

  * *d*:  라우터 사이의 거리, *s* : 링크의 전파 속도
  
* 전송 지연과 전파 지연 비교

  * 전송 지연 : 라우터가 패킷을 내보내는 데 필요한 시간, 패킷 길이와 전송률의 함수이며 두 라우터 사이의 거리와는 관계없다.

  * 전파 지연 : 비트가 한 라우터에서 다음 라우터로 전파되는데 걸리는 시간, 두 라우터 사이의 거리에 대한 함수이며 패킷 길이나 링크 전송률과는 관계 없다.

* 전체 노드 지연(total nodal delay)

$$
d_{nodal} = d_{proc} + d_{queue} + d_{trans} + d_{prop}
$$

## 1.4.2 큐잉 지연과 패킷 손실

| parameter        | mean                        |
  | ---------------------------------- | ---- |
  | *a* (packet/sec) | 패킷이 큐에 도착하는 평균율 |
  | *R* (bit/sec)                      | 전송률 |
  | *L*                 |    패킷의 길이    |
  | *La*  |  비트가 큐에 도착하는 평균율    |

* 트래픽 강도(traffic intensity) : *La/R*

  * *La/R* > 1이면 비트가 큐에 도착하는 평균율이 비트가 큐에서 전송되는 비율 초과, 큐가 끝없이 증가하고 큐잉 지연은 무한대에 도달
  
  * 트래픽 강도가 1보다 크지 않게 시스템 설계
  
  * *La/R* ≤ 1이면 도착 트래픽의 특성이 큐잉 지연에 영향
  
    * 패킷이 주기적으로 *L/R* 마다 도착하는 경우 큐잉 지연 無
    
    * 패킷이 몰려서 도착하는 경우(burst) 상당한 평균 큐잉 지연 발생
    
    * *N*개의 패킷이 동시에 *(L/R)N*초마다 도착한다고 가정
    
      * 처음 전송된 패킷은 큐잉 지연이 없다
      
      * 두 번째 전송된 패킷은 *L/R* 초의 큐잉 지연
      
      * n 번째 전송된 패킷은 *(n-1)L/R* 초의 큐잉 지연
      
  * 트래픽 강도가 0에 가까우면 패킷 도착이 드물고 간격이 멀어서 다음에 도착하는 패킷이 큐에서 다른 패킷을 발견하는 경우가 거의 없음, 평균 큐잉 지연은 0에 근사

* 패킷 손실

  * 큐가 가득차서 패킷을 저장할 수 없는 경우에 라우터는 그 패킷을 버리고(drop) 그 결과 패킷을 잃어버리게(lost) 된다.

  * 손실 패킷의 비율은 트래픽 강도가 클수록 증가한다.

### 1.4.3 종단간 지연

* 출발지에서 목적지까지의 지연

* 출발지 호스트와 목적지 호스트 사이에 N-1 개의 라우터

* 큐잉 지연을 무시할 수 있을 때,

$$
d_{end-end} = N(d_{proc} +  d_{trans} + d_{prop})
$$

### 1.4.4 컴퓨터 네트워크에서의 처리율

* 호스트 A에서 B로 매우 큰 파일을 전송하는 상황 고려

* 순간적인 처리율(instantaneous throughput) : 호스트 B가 파일을 수신하는 비율(bit/sec)

* 평균 처리율(average throughput) : 파일이 *F* 비트로 구성되고 호스트 B가 모든 *F* 비트를 수신하는데 걸리는 시간 *T*초가 걸린다고 가정하면, 평균 처리율은 *F/T* (bit/sec)

* Rs는 서버와 라우터 간의 링크 속도이고 Rc는 라우터와 클라이언트 간의 링크 속도로 가정

  * *Rs < Rc* 이면 무사히 비트 전달 가능
  
  * *Rc < Rs* 이면 라우터는 자신이 수신하는 비트만큼 빠르게 전달 불가
  
  * 병목 링크(bottle-neck link)의 전송률이 처리율
  
    * 2개의 링크로 구성된 네트워크의 경우 처리율은 *min(Rs, Rc)*
    
    * *F* 비트의 커다란 파일을 서버에서 클라이언트로 전송하는데 걸리는 시간은 *F/min(Rs, Rc)*
