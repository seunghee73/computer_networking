## 2.4 DNS 인터넷 디렉터리 서비스

* 호스트 네임(hostname) : 호스트에 대한 하나의 식별자, 주로 주소에 대해서 지칭
* 호스트는 IP 주소로도 식별
  * IP 주소는 4바이트로 구성되고 121.7.106.83과 같은 형태, 0~255의 십진수로 표현하는 각 바이트는 . 으로 구분
  * 계층 구조여서 주소를 왼쪽에서 오른쪽으로 조사하여 호스트가 인터넷의 어디에 있는지 자세한 정보를 얻을 수 있다.

### 2.4.1 DNS가 제공하는 서비스

* **DNS(Domain Name System)** : 호스트 네임을 IP 주소로 변환해주는 디렉터리 서비스

  * 서버들이 계층 구조로 구현된 분산 데이터베이스
  * 호스트가 분산 데이터베이스로 질의하도록 허락하는 애플리케이션 계층 프로토콜
  * 사용자가 제공한 호스트 네임을 IP 주소로 변환하기 위해 주로 이용

  1. 사용자 컴퓨터는 DNS 애플리케이션의 클라이언트 측을 수행한다.
  2. 브라우저는 URL로부터 호스트 네임을 추출하고 이를 DNS 애플리케이션의 클라이언트 측에 넘긴다.
  3. DNS 클라이언트는 DNS 서버로 호스트 네임을 포함하는 질의를 보낸다.
  4. DNS 클라이언트는 호스트 네임에 대한 IP 주소를 가진 응답을 받는다.
  5. 브라우저가 DNS로부터 IP 주소를 받으면, 브라우저는 그 IP 주소와 그 주소의 포트에 위치하는 HTTP 서버 프로세스로 TCP 연결 초기화

  * DNS는 DNS를 사용하는 인터넷 애플리케이션에 추가 지연을 주지만, 원하는 IP 주소는 가까운 DNS 서버에 캐시되어 있어서 평균 DNS 지연 뿐 아니라 DNS 네트워크 트래픽 감소에 도움을 준다.
  * 호스트 엘리어싱(host aliasing) : 복잡한 호스트 네임을 가진 호스트는 하나 이상의 별명을 가질 수 있다. 
  * 메일 서버 엘리어싱(mail server aliasing) : DNS는 호스트의 IP 주소 뿐만 아니라 제공된 별칭 호스트 네임에 대한 정식 호스트 네임을 얻기 위해 메일 애플리케이션에 의해 수행
  * 부하 분산(load distribution) : 여러 서버에 중복되어 있는 호스트의 경우 여러 IP 주소가 하나의 정식 호스트 네임과 연관되어 있다. 서버는 IP 주소 전체를 가지고 응답하지만, 각 응답에서 주소는 순환식으로 보내어 트래픽을 분산시킨다.

### 2.4.2 DNS 동작 원리 개요

* 분산 계층 데이터 베이스

  * 확장성 문제를 다루기 위해 DNS는 많은 서버를 이용하고 이들을 계층 형태로 구성하며 전 세계에 분산시킨다.

  * 어떤 단일 DNS 서버도 인터넷에 있는 모든 호스트에 대한 매핑을 갖지 않는 대신 DNS 서버 사이에 분산된다.

  * 계층으로 구성된 세 유형의 DNS 서버

    *   루트(root) DNS 서버
    *   최상위 레벨 도메인 네임(TLD, top-level domain) DNS 서버 : com, org, net, edu와 같은 상위 레벨 도메인과 kr, uk 등 모든 국가의 상위 레벨 도메인에 대한 TLD 서버 존재
    *   책임(authoritative) DNS 서버 : 인터넷에서 접근하기 쉬운 호스트(웹 서버와 메일 서버)를 가진 모든 기관은 호스트 네임을 IP 주소로 매핑하는 공개적은 DNS 레코드를 제공 해야하고 책임 DNS 서버에서는 이를 가지고 있다.

  * 로컬 DNS 서버

    *   서버들의 계층 구조에 엄격하게 속하지는 않지만 DNS 구조의 중심
    *   ISP들은 로컬 DNS 서버를 갖고 호스트가 ISP에 연결될 때 그 ISP는 로컬 DNS 서버로부터 IP 주소를 호스트에게 제공

  * DNS 캐싱

    *   DNS는 지연 성능 향상과 네트워크의 DNS 메시지 수를 줄이기 위해 캐싱 사용
    *   호스트 DNS와 IP 주소 사이의 매핑과 호스트는 영구적이지 않기 때문에 DNS 서버는 어떤 기간 이후 저장된 정보 제거

### 2.4.3 DNS 레코드와 메시지

* DNS 분산 데이터베이스를 구현한 DNS 서버들은 호스트 네임을 IP 주소로 매핑하기 위한 자원 레코드(RR, resource record)를 저장

