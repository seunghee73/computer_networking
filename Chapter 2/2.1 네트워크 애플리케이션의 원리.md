## 2.1 네트워크 애플리케이션의 원리

* 네트워크 애플리케이션 개발의 중심은 다른 종단 시스템에서 동작하고 네트워크를 통해 서로 통신하는 프로그램을 작성하는 것

## 2.1.1 네트워크 애플리케이션 구조
* 애플리케이션 구조(application architecture)
  * 애플리케이션 개발자에 의해 설계되고 애플리케이션이 다양한 종단 시스템에서 어떻게 조직되어야 하는지를 지시
  * **클라이언트-서버 구조(client-server architecture)**
    * 서버(server) 
      * 항상 켜져 있는 호스트
      * 다른 많은 클라이언트들로부터 요청을 받는다.
      * 고정 IP 주소라는 잘 알려진 주소를 갖는다.
      * 많은 수의 호스트를 갖춘 테이터 센서(data center)가 강력한 가상의 서버를 생성하는데 흔히 사용된다.
    * 클라이언트(client)
      * 가끔 혹은 항상 켜져 있을 수 있다. 
      * 클라이언트들은 서로 직접적으로 통신하지 않는다.
  * **P2P 구조(peer-to-peer)**
    * 항상 켜져 있는 기반 구조 서버에 최소로 의존한다.(혹은 의존하지 않는다.)
    * 애플리케이션은 피어(peer)라는 간헐적으로 연결된 호스트 쌍이 서로 직접 통신하도록 한다.
    * 자가 확장성(self-scalability) / 비용 효율적
    * 보안, 성능, 신뢰성 부분이 도전 과제

## 2.1.2 프로세스 간 통신
* 프로세스(process)
  * 프로세스는 종단 시스템에서 실행되는 프로그램
  * 통신 프로세스가 같은 종단 시스템에서 실행될 때 그들은 서로 프로세스 간에 통신
  * 2개의 다른 종단 시스템에서 프로세스는 컴퓨터 네트워크를 통한 메시지 교환으로 서로 통신
  * 일단적으로 통신하는 프로세스 각 쌍에 대해 클라이언트의 프로세스와 서버의 프로세스 중 하나로 이름을 짓는다.
    * 클라이언트(client) : 두 프로세스 간의 통신 세션에서 통신을 초기화(다른 프로세스와 세션을 시작하려고 접속을 초기화하는 프로세스)하는 프로세스
    * 서버(server) : 세션을 시작하기 위해 접속을 기다리는 프로세스
  * 소켓(socket)을 통해 네트워크로 메시지를 보내고 받는다.
    * 소켓은 호스트의 애플리케이션 계층과 트랜스포트 계층 간의 인터페이스
    * 소켓은 네트워크 애플리케이션이 인터넷에 만든 프로그래밍 인터페이스이므로, 애플리케이션과 네트워크 사이의 **API(Application Programming Interface)** 라고도 한다. 
* 프로세스 주소 배정
  * 수신 프로세스 식별
    * **IP 주소** : 호스트의 주소
    * **포트 번호(port number)** : 목적지 호스트 내의 수신 프로세스를 명시하는 식별자
  
## 2.1.3 애플리케이션이 이용 가능한 트랜스포트 서비스
* 신뢰적 데이터 전송
  * 패킷들은 컴퓨터 네트워크 내에서 손실될수 있다. (버퍼 오버플로우, 패킷의 비트 오류 등으로 인한 drop)
  * 프로토콜이 보장된 데이터 전송 서비스를 제공한다면 이를 신뢰적 데이터 전송을 제공한다고 한다.
  * 손실 허용 애플리케이션(loss-tolerant application) : 트랜스포트 계층 프로토콜이 신뢰적 데이터 전송을 제공하지 않을 때, 송신 프로세스가 보낸 데이터가 수신 프로세스에 도착하지 않을 수 있다. 이를 허용하는 애플리케이션을 손실 허용 애플리케이션이라고 한다.
* 처리량
  * 처리율 : 네트워크 경로를 따라 두 프로세스 간의 통신 세션에서 송신 프로세스가 수신 프로세스로 비트를 전달할 수 있는 비율
  * 애플리케이션이 *r* (bits/sec)의 보장된 처리율을 요구하는 경우 트랜스포트 프로토콜은 가용한 처리율이 항상 적어도 *r* bps임을 보장한다.
  * 처리율 요구 사항을 갖는 애플리케이션은 대역폭 민감 애플리케이션(bandwidth-sensitive application)이라고 한다.
  * 가용한 처리율을 많으면 많은 대로 적으면 적은대로 이용할 수 있는 애플리케이션을 탄력적 애플리케이션(elastic application)이라고 한다.
* 시간
  * 시간 보장(timing guarantee) 제공할 수 있다.
* 보안
  * 하나 이상의 보안 서비스를 제공할 수 있다. (암호화)
  * 데이터 무결성과 종단 인증 등 포함

## 2.1.4 인터넷 전송 프로토콜이 제공하는 서비스

* **UDP(User Datagram Protocol)** 와 **TCP(Transmission Control Protocol) **
* TCP 서비스

  * 연결 지향형 서비스와 신뢰적인 데이터 전송 서비스
  * 연결 지향형 서비스
    * 핸드셰이킹 : 애플리케이션 계층 메시지를 전송하기 전에 TCP는 클라이언트와 서버가 서로 전송 제어 정보를 교환하도록 하는 과정, 클라이언트와 서버에 패킷이 곧 도달할 것이니 준비하라고 알려 주는 역할
    * TCP 연결 : 핸드 셰이킹 단계가 지나면 TCP 연결이 두 프로세스 소켓 사이에 존재, 두 프로세스가 서로에게 동시에 메시지를 보낼 수 있어서 전이중(full-duplex) 연결이라고 한다.
    * 애플리케이션이 메시지 전송을 마치면 연결을 끊어야 한다.
  * 신뢰적인 데이터 전송 서비스
    * 통신 프로세스는 모든 데이터를 오류없이 올바른 순서로 전달하기 위해 TCP에 의존
    * 바이트 스트림을 손실하거나 중복되지 않게 수신 소켓으로 전달
  * 혼잡 제어 방식
    * 통신하는 프로세스의 직접 이득 < 인터넷의 전체 성능 향상
    * 네트워크가 혼잡상태에 이르면 프로세스(클라이언트 또는 서버) 속도를 낮춘다.
    * 각 TCP 연결이 네트워크 대역폭을 공평하게 공유할 수 있게 제한하려고 시도
* UDP 서비스
  * 최소의 서비스 모델을 가진 간단한 전송 프로토콜
  * 비연결형이므로 두 프로세스가 통신하기 전에 핸드셰이킹을 하지 않는다.
  * 비신뢰적인 데이터 전송 서비스 제공 (UDP 소켓으로 메시지를 보내면, UDP는 그 메시지가 수신 소켓에 도착하는 것을 보장하지 않는다.)
  * 메시지들의 순서가 뒤바뀔 수도 있다.
  * 혼잡 제어 방식을 포함하지 않는다.
    * 데이터를 원하는 속도로 하위 계층으로 보낼 수 있다. (중간 링크의 제한된 대역폭 혹은 혼잡으로 인해 속도가 느려질 수 있다.)
* TCP나 UDP는 암호화를 제공하지 않는다.

  * TCP를 강화한 SSL(Secure Sockets Layer) : TCP의 기능 + 암호화, 데이터 무결성, 종단 인증
